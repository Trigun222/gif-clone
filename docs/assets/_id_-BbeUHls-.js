import{g as ae,p as he,j as me,l as ge,s as w,q as S,n as K,a9 as ye,aa as U,N as Se,w as _e,x as d,y as xe,z as R,B as ke,ab as be,C as we,I as Q,ac as ze,a as _,d as Ce,r as J,W as Ie,b as X,a2 as y,a5 as Ve,u as Re,a1 as Ge,o as k,c as G,e as Ee,T as Te,a6 as H,a7 as Y,P as Ae,a4 as Fe}from"./index-Cap82evc.js";import{z as Pe,A as Me,g as N,B as We,C as Be,q as Oe,D as He,s as Ne,o as Z,p as ee,V as De,_ as $e}from"./index-B0MsH3eC.js";import{b as te,S as qe}from"./index-BQwy_rjP.js";import{V as le}from"./VImg-qaGMLBKt.js";function Le(s){let{selectedElement:o,containerElement:a,isRtl:l,isHorizontal:c}=s;const h=z(c,a),i=oe(c,l,a),m=z(c,o),v=ne(c,o),p=m*.4;return i>v?v-p:i+h<v+m?v-h+m+p:i}function je(s){let{selectedElement:o,containerElement:a,isHorizontal:l}=s;const c=z(l,a),h=ne(l,o),i=z(l,o);return h-c/2+i/2}function se(s,o){const a=s?"scrollWidth":"scrollHeight";return(o==null?void 0:o[a])||0}function Ke(s,o){const a=s?"clientWidth":"clientHeight";return(o==null?void 0:o[a])||0}function oe(s,o,a){if(!a)return 0;const{scrollLeft:l,offsetWidth:c,scrollWidth:h}=a;return s?o?h-c+l:l:a.scrollTop}function z(s,o){const a=s?"offsetWidth":"offsetHeight";return(o==null?void 0:o[a])||0}function ne(s,o){const a=s?"offsetLeft":"offsetTop";return(o==null?void 0:o[a])||0}const re=Symbol.for("vuetify:v-slide-group"),Ue=he({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:re},nextIcon:{type:Q,default:"$next"},prevIcon:{type:Q,default:"$prev"},showArrows:{type:[Boolean,String],validator:s=>typeof s=="boolean"||["always","desktop","mobile"].includes(s)},...we(),...be({mobile:null}),...ke(),...Me({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Qe=ae()({name:"VSlideGroup",props:Ue(),emits:{"update:modelValue":s=>!0},setup(s,o){let{slots:a}=o;const{isRtl:l}=me(),{displayClasses:c,mobile:h}=ge(s),i=Pe(s,s.symbol),m=w(!1),v=w(0),p=w(0),g=w(0),u=S(()=>s.direction==="horizontal"),{resizeRef:r,contentRect:x}=K(),{resizeRef:f,contentRect:C}=K(),D=ye(),$=S(()=>({container:r.el,duration:200,easing:"easeOutQuart"})),ie=S(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[0]):-1),ue=S(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[i.selected.value.length-1]):-1);if(U){let t=-1;Se(()=>[i.selected.value,x.value,C.value,u.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(x.value&&C.value){const e=u.value?"width":"height";p.value=x.value[e],g.value=C.value[e],m.value=p.value+1<g.value}if(ie.value>=0&&f.el){const e=f.el.children[ue.value];q(e,s.centerActive)}})})}const I=w(!1);function q(t,e){let n=0;e?n=je({containerElement:r.el,isHorizontal:u.value,selectedElement:t}):n=Le({containerElement:r.el,isHorizontal:u.value,isRtl:l.value,selectedElement:t}),L(n)}function L(t){if(!U||!r.el)return;const e=z(u.value,r.el),n=oe(u.value,l.value,r.el);if(!(se(u.value,r.el)<=e||Math.abs(t-n)<16)){if(u.value&&l.value&&r.el){const{scrollWidth:B,offsetWidth:O}=r.el;t=B-O-t}u.value?D.horizontal(t,$.value):D(t,$.value)}}function ce(t){const{scrollTop:e,scrollLeft:n}=t.target;v.value=u.value?n:e}function fe(t){if(I.value=!0,!(!m.value||!f.el)){for(const e of t.composedPath())for(const n of f.el.children)if(n===e){q(n);return}}}function de(t){I.value=!1}let E=!1;function ve(t){var e;!E&&!I.value&&!(t.relatedTarget&&((e=f.el)!=null&&e.contains(t.relatedTarget)))&&b(),E=!1}function j(){E=!0}function pe(t){if(!f.el)return;function e(n){t.preventDefault(),b(n)}u.value?t.key==="ArrowRight"?e(l.value?"prev":"next"):t.key==="ArrowLeft"&&e(l.value?"next":"prev"):t.key==="ArrowDown"?e("next"):t.key==="ArrowUp"&&e("prev"),t.key==="Home"?e("first"):t.key==="End"&&e("last")}function V(t,e){if(!t)return;let n=t;do n=n==null?void 0:n[e==="next"?"nextElementSibling":"previousElementSibling"];while(n!=null&&n.hasAttribute("disabled"));return n}function b(t){if(!f.el)return;let e;if(!t)e=ze(f.el)[0];else if(t==="next"){if(e=V(f.el.querySelector(":focus"),t),!e)return b("first")}else if(t==="prev"){if(e=V(f.el.querySelector(":focus"),t),!e)return b("last")}else t==="first"?(e=f.el.firstElementChild,e!=null&&e.hasAttribute("disabled")&&(e=V(e,"next"))):t==="last"&&(e=f.el.lastElementChild,e!=null&&e.hasAttribute("disabled")&&(e=V(e,"prev")));e&&e.focus({preventScroll:!0})}function T(t){const e=u.value&&l.value?-1:1,n=(t==="prev"?-e:e)*p.value;let W=v.value+n;if(u.value&&l.value&&r.el){const{scrollWidth:B,offsetWidth:O}=r.el;W+=B-O}L(W)}const A=S(()=>({next:i.next,prev:i.prev,select:i.select,isSelected:i.isSelected})),F=S(()=>{switch(s.showArrows){case"always":return!0;case"desktop":return!h.value;case!0:return m.value||Math.abs(v.value)>0;case"mobile":return h.value||m.value||Math.abs(v.value)>0;default:return!h.value&&(m.value||Math.abs(v.value)>0)}}),P=S(()=>Math.abs(v.value)>1),M=S(()=>{if(!r.value)return!1;const t=se(u.value,r.el),e=Ke(u.value,r.el);return t-e-Math.abs(v.value)>1});return _e(()=>d(s.tag,{class:R(["v-slide-group",{"v-slide-group--vertical":!u.value,"v-slide-group--has-affixes":F.value,"v-slide-group--is-overflowing":m.value},c.value,s.class]),style:xe(s.style),tabindex:I.value||i.selected.value.length?-1:0,onFocus:ve},{default:()=>{var t,e,n;return[F.value&&_("div",{key:"prev",class:R(["v-slide-group__prev",{"v-slide-group__prev--disabled":!P.value}]),onMousedown:j,onClick:()=>P.value&&T("prev")},[((t=a.prev)==null?void 0:t.call(a,A.value))??d(te,null,{default:()=>[d(N,{icon:l.value?s.nextIcon:s.prevIcon},null)]})]),_("div",{key:"container",ref:r,class:R(["v-slide-group__container",s.contentClass]),onScroll:ce},[_("div",{ref:f,class:"v-slide-group__content",onFocusin:fe,onFocusout:de,onKeydown:pe},[(e=a.default)==null?void 0:e.call(a,A.value)])]),F.value&&_("div",{key:"next",class:R(["v-slide-group__next",{"v-slide-group__next--disabled":!M.value}]),onMousedown:j,onClick:()=>M.value&&T("next")},[((n=a.next)==null?void 0:n.call(a,A.value))??d(te,null,{default:()=>[d(N,{icon:l.value?s.prevIcon:s.nextIcon},null)]})])]}})),{selected:i.selected,scrollTo:T,scrollOffset:v,focus:b,hasPrev:P,hasNext:M}}}),Je=ae()({name:"VSlideGroupItem",props:We(),emits:{"group:selected":s=>!0},setup(s,o){let{slots:a}=o;const l=Be(s,re);return()=>{var c;return(c=a.default)==null?void 0:c.call(a,{isSelected:l.isSelected.value,select:l.select,toggle:l.toggle,selectedClass:l.selectedClass.value})}}}),Xe={class:"d-flex align-center mt-4 mb-2"},Ye={class:"ml-3 mb-0"},Ze={key:0,class:"gif-wrapper"},et={key:1},tt={key:2},lt=["onClick"],st=Ce({__name:"[id]",setup(s){const o=Ve(),a=Re(),l=J(null),c=J([]),h=async()=>{const p=o.params.id;l.value=await He(p)},i=()=>{var p;(p=l.value)!=null&&p.id&&localStorage.setItem("lastGifId",l.value.id)},m=async()=>{c.value=await Ne("fun",20,Math.floor(Math.random()*10)+1)},v=p=>{a.push(`/gif/${p}`)};return Ie(async()=>{await h(),await m()}),(p,g)=>{const u=Ge("router-link");return k(),X(Oe,null,{default:y(()=>[d(Z,{justify:"center"},{default:y(()=>[d(ee,{cols:"12",md:"8"},{default:y(()=>{var r,x,f;return[_("div",Xe,[d(De,{icon:"",onClick:g[0]||(g[0]=C=>Te(a).push("/"))},{default:y(()=>[d(N,null,{default:y(()=>g[1]||(g[1]=[H("mdi-arrow-left")])),_:1,__:[1]})]),_:1}),_("h2",Ye,Y((r=l.value)==null?void 0:r.title),1)]),l.value?(k(),G("div",Ze,[d(le,{src:l.value.images.original.url,alt:l.value.title,"max-height":"400",class:"mb-4"},null,8,["src","alt"]),d(qe,{gif:{id:l.value.id,title:l.value.title}},null,8,["gif"])])):(k(),G("p",et,"Загрузка...")),(f=(x=l.value)==null?void 0:x.user)!=null&&f.username?(k(),G("p",tt,[g[2]||(g[2]=H(" Автор: ")),d(u,{to:`/author/${l.value.user.username}`,onClick:i},{default:y(()=>[H(Y(l.value.user.display_name||l.value.user.username),1)]),_:1},8,["to"])])):Ee("",!0)]}),_:1})]),_:1}),d(Z,{class:"mt-8"},{default:y(()=>[d(ee,{cols:"12"},{default:y(()=>[g[3]||(g[3]=_("h3",{class:"mb-4"},"Случайные гифки",-1)),d(Qe,{"show-arrows":"",class:"random-slider"},{default:y(()=>[(k(!0),G(Ae,null,Fe(c.value,r=>(k(),X(Je,{key:r.id},{default:y(()=>[_("div",{onClick:x=>v(r.id),class:"mx-2",style:{width:"200px",cursor:"pointer"}},[d(le,{src:r.images.fixed_width.url,alt:r.title,height:"150",class:"rounded"},null,8,["src","alt"])],8,lt)]),_:2},1024))),128))]),_:1})]),_:1,__:[3]})]),_:1})]),_:1})}}}),it=$e(st,[["__scopeId","data-v-578de797"]]);export{it as default};
