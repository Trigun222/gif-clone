import{g as ae,p as he,j as ge,l as ye,s as b,q as S,n as K,al as Se,am as U,S as oe,w as _e,x as v,y as xe,z as V,B as ke,an as we,D as be,I as Q,ao as ze,a as _,d as Ce,r as X,a2 as Ie,ai as Re,b as J,ab as y,u as Ve,aa as Ge,o as k,c as G,e as Ee,$ as Ae,ag as H,aj as Y,X as Te,af as Fe}from"./index-B0znHtLz.js";import{t as Pe,v as Oe,e as $,w as We,x as Be,l as Me,y as He,z as $e,j as Z,k as ee,V as De,_ as Ne}from"./index-CVB20eSm.js";import{b as te,S as Le}from"./index-CwDSiUJt.js";import{V as le}from"./VImg-t9qPwMTH.js";function je(s){let{selectedElement:o,containerElement:a,isRtl:l,isHorizontal:c}=s;const m=z(c,a),i=ne(c,l,a),h=z(c,o),p=ie(c,o),f=h*.4;return i>p?p-f:i+m<p+h?p-m+h+f:i}function qe(s){let{selectedElement:o,containerElement:a,isHorizontal:l}=s;const c=z(l,a),m=ie(l,o),i=z(l,o);return m-c/2+i/2}function se(s,o){const a=s?"scrollWidth":"scrollHeight";return(o==null?void 0:o[a])||0}function Ke(s,o){const a=s?"clientWidth":"clientHeight";return(o==null?void 0:o[a])||0}function ne(s,o,a){if(!a)return 0;const{scrollLeft:l,offsetWidth:c,scrollWidth:m}=a;return s?o?m-c+l:l:a.scrollTop}function z(s,o){const a=s?"offsetWidth":"offsetHeight";return(o==null?void 0:o[a])||0}function ie(s,o){const a=s?"offsetLeft":"offsetTop";return(o==null?void 0:o[a])||0}const re=Symbol.for("vuetify:v-slide-group"),Ue=he({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:re},nextIcon:{type:Q,default:"$next"},prevIcon:{type:Q,default:"$prev"},showArrows:{type:[Boolean,String],validator:s=>typeof s=="boolean"||["always","desktop","mobile"].includes(s)},...be(),...we({mobile:null}),...ke(),...Oe({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Qe=ae()({name:"VSlideGroup",props:Ue(),emits:{"update:modelValue":s=>!0},setup(s,o){let{slots:a}=o;const{isRtl:l}=ge(),{displayClasses:c,mobile:m}=ye(s),i=Pe(s,s.symbol),h=b(!1),p=b(0),f=b(0),g=b(0),u=S(()=>s.direction==="horizontal"),{resizeRef:r,contentRect:x}=K(),{resizeRef:d,contentRect:C}=K(),D=Se(),N=S(()=>({container:r.el,duration:200,easing:"easeOutQuart"})),ue=S(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[0]):-1),ce=S(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[i.selected.value.length-1]):-1);if(U){let t=-1;oe(()=>[i.selected.value,x.value,C.value,u.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(x.value&&C.value){const e=u.value?"width":"height";f.value=x.value[e],g.value=C.value[e],h.value=f.value+1<g.value}if(ue.value>=0&&d.el){const e=d.el.children[ce.value];L(e,s.centerActive)}})})}const I=b(!1);function L(t,e){let n=0;e?n=qe({containerElement:r.el,isHorizontal:u.value,selectedElement:t}):n=je({containerElement:r.el,isHorizontal:u.value,isRtl:l.value,selectedElement:t}),j(n)}function j(t){if(!U||!r.el)return;const e=z(u.value,r.el),n=ne(u.value,l.value,r.el);if(!(se(u.value,r.el)<=e||Math.abs(t-n)<16)){if(u.value&&l.value&&r.el){const{scrollWidth:B,offsetWidth:M}=r.el;t=B-M-t}u.value?D.horizontal(t,N.value):D(t,N.value)}}function fe(t){const{scrollTop:e,scrollLeft:n}=t.target;p.value=u.value?n:e}function de(t){if(I.value=!0,!(!h.value||!d.el)){for(const e of t.composedPath())for(const n of d.el.children)if(n===e){L(n);return}}}function ve(t){I.value=!1}let E=!1;function pe(t){var e;!E&&!I.value&&!(t.relatedTarget&&((e=d.el)!=null&&e.contains(t.relatedTarget)))&&w(),E=!1}function q(){E=!0}function me(t){if(!d.el)return;function e(n){t.preventDefault(),w(n)}u.value?t.key==="ArrowRight"?e(l.value?"prev":"next"):t.key==="ArrowLeft"&&e(l.value?"next":"prev"):t.key==="ArrowDown"?e("next"):t.key==="ArrowUp"&&e("prev"),t.key==="Home"?e("first"):t.key==="End"&&e("last")}function R(t,e){if(!t)return;let n=t;do n=n==null?void 0:n[e==="next"?"nextElementSibling":"previousElementSibling"];while(n!=null&&n.hasAttribute("disabled"));return n}function w(t){if(!d.el)return;let e;if(!t)e=ze(d.el)[0];else if(t==="next"){if(e=R(d.el.querySelector(":focus"),t),!e)return w("first")}else if(t==="prev"){if(e=R(d.el.querySelector(":focus"),t),!e)return w("last")}else t==="first"?(e=d.el.firstElementChild,e!=null&&e.hasAttribute("disabled")&&(e=R(e,"next"))):t==="last"&&(e=d.el.lastElementChild,e!=null&&e.hasAttribute("disabled")&&(e=R(e,"prev")));e&&e.focus({preventScroll:!0})}function A(t){const e=u.value&&l.value?-1:1,n=(t==="prev"?-e:e)*f.value;let W=p.value+n;if(u.value&&l.value&&r.el){const{scrollWidth:B,offsetWidth:M}=r.el;W+=B-M}j(W)}const T=S(()=>({next:i.next,prev:i.prev,select:i.select,isSelected:i.isSelected})),F=S(()=>{switch(s.showArrows){case"always":return!0;case"desktop":return!m.value;case!0:return h.value||Math.abs(p.value)>0;case"mobile":return m.value||h.value||Math.abs(p.value)>0;default:return!m.value&&(h.value||Math.abs(p.value)>0)}}),P=S(()=>Math.abs(p.value)>1),O=S(()=>{if(!r.value)return!1;const t=se(u.value,r.el),e=Ke(u.value,r.el);return t-e-Math.abs(p.value)>1});return _e(()=>v(s.tag,{class:V(["v-slide-group",{"v-slide-group--vertical":!u.value,"v-slide-group--has-affixes":F.value,"v-slide-group--is-overflowing":h.value},c.value,s.class]),style:xe(s.style),tabindex:I.value||i.selected.value.length?-1:0,onFocus:pe},{default:()=>{var t,e,n;return[F.value&&_("div",{key:"prev",class:V(["v-slide-group__prev",{"v-slide-group__prev--disabled":!P.value}]),onMousedown:q,onClick:()=>P.value&&A("prev")},[((t=a.prev)==null?void 0:t.call(a,T.value))??v(te,null,{default:()=>[v($,{icon:l.value?s.nextIcon:s.prevIcon},null)]})]),_("div",{key:"container",ref:r,class:V(["v-slide-group__container",s.contentClass]),onScroll:fe},[_("div",{ref:d,class:"v-slide-group__content",onFocusin:de,onFocusout:ve,onKeydown:me},[(e=a.default)==null?void 0:e.call(a,T.value)])]),F.value&&_("div",{key:"next",class:V(["v-slide-group__next",{"v-slide-group__next--disabled":!O.value}]),onMousedown:q,onClick:()=>O.value&&A("next")},[((n=a.next)==null?void 0:n.call(a,T.value))??v(te,null,{default:()=>[v($,{icon:l.value?s.prevIcon:s.nextIcon},null)]})])]}})),{selected:i.selected,scrollTo:A,scrollOffset:p,focus:w,hasPrev:P,hasNext:O}}}),Xe=ae()({name:"VSlideGroupItem",props:We(),emits:{"group:selected":s=>!0},setup(s,o){let{slots:a}=o;const l=Be(s,re);return()=>{var c;return(c=a.default)==null?void 0:c.call(a,{isSelected:l.isSelected.value,select:l.select,toggle:l.toggle,selectedClass:l.selectedClass.value})}}}),Je={class:"d-flex align-center mt-4 mb-2"},Ye={class:"ml-3 mb-0"},Ze={key:0,class:"gif-wrapper"},et={key:1},tt={key:2},lt=["onClick"],st=Ce({__name:"[id]",setup(s){const o=Re(),a=Ve(),l=X(null),c=X([]);async function m(){const f=o.params.id;l.value=await He(f)}async function i(){const f=Array.from({length:20},()=>$e());c.value=await Promise.all(f)}function h(){var f;(f=l.value)!=null&&f.id&&localStorage.setItem("lastGifId",l.value.id)}function p(f){a.push(`/gif/${f}`)}return Ie(async()=>{await m(),await i()}),oe(()=>o.params.id,async()=>{await m(),await i()}),(f,g)=>{const u=Ge("router-link");return k(),J(Me,null,{default:y(()=>[v(Z,{justify:"center"},{default:y(()=>[v(ee,{cols:"12",md:"8"},{default:y(()=>{var r,x,d;return[_("div",Je,[v(De,{icon:"",onClick:g[0]||(g[0]=C=>Ae(a).push("/"))},{default:y(()=>[v($,null,{default:y(()=>g[1]||(g[1]=[H("mdi-arrow-left")])),_:1,__:[1]})]),_:1}),_("h2",Ye,Y((r=l.value)==null?void 0:r.title),1)]),l.value?(k(),G("div",Ze,[v(le,{src:l.value.images.original.url,alt:l.value.title,"max-height":"400",class:"mb-4"},null,8,["src","alt"]),v(Le,{gif:{id:l.value.id,title:l.value.title}},null,8,["gif"])])):(k(),G("p",et,"Загрузка...")),(d=(x=l.value)==null?void 0:x.user)!=null&&d.username?(k(),G("p",tt,[g[2]||(g[2]=H(" Автор: ")),v(u,{to:`/author/${l.value.user.username}`,onClick:h},{default:y(()=>[H(Y(l.value.user.display_name||l.value.user.username),1)]),_:1},8,["to"])])):Ee("",!0)]}),_:1})]),_:1}),v(Z,{class:"mt-8"},{default:y(()=>[v(ee,{cols:"12"},{default:y(()=>[g[3]||(g[3]=_("h3",{class:"mb-4"},"Случайные гифки",-1)),v(Qe,{"show-arrows":"",class:"random-slider"},{default:y(()=>[(k(!0),G(Te,null,Fe(c.value,r=>(k(),J(Xe,{key:r.id},{default:y(()=>[_("div",{onClick:x=>p(r.id),class:"mx-2",style:{width:"200px",cursor:"pointer"}},[v(le,{src:r.images.fixed_width.url,alt:r.title,width:"200",height:"150",class:"rounded uniform-gif"},null,8,["src","alt"])],8,lt)]),_:2},1024))),128))]),_:1})]),_:1,__:[3]})]),_:1})]),_:1})}}}),rt=Ne(st,[["__scopeId","data-v-62589669"]]);export{rt as default};
