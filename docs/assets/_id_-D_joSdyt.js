import{d as U,r as n,o as _,a as y,c as S,w as T,E as W,e as s,g as t,h as j,i,j as q,v as D,F as V,b as I,f as o,V as O,k as F,l as f,ae as Y,m as M}from"./index-CLQWBV1Q.js";import{b as J,s as N,g as K,V as Q,a as A,_ as X}from"./index-C89p0vCC.js";import{d as Z,V as $,G as ee}from"./VTextField-CXFAU-mR.js";const ae={key:0,class:"not-found"},te={class:"not-found-gif"},ne=["src"],se={key:1,class:"loading"},k=30,oe=U({__name:"[id]",setup(le){const m=n(!1);function w(){m.value=!0}_(()=>{document.readyState==="complete"?w():window.addEventListener("load",w)}),y(()=>window.removeEventListener("load",w));const r=n(""),u=n([]),x=n(null),d=n(1),c=n(!1),h=n(!1),b=n(!0),v=n(window.innerWidth);function E(){v.value=window.innerWidth}_(()=>window.addEventListener("resize",E)),y(()=>window.removeEventListener("resize",E));const L=S(()=>v.value<=600?1:v.value<=900?2:v.value<=1200?3:4),B=S(()=>{const l=Array.from({length:L.value},()=>[]);return u.value.forEach((e,a)=>{l[a%L.value].push(e)}),l});T(u,async()=>{await W(),document.querySelectorAll(".gif-item").forEach((e,a)=>{e.classList.remove("appear"),setTimeout(()=>e.classList.add("appear"),a*20)})});const g=async(l=!1)=>{c.value=!0;let e=[];try{e=r.value?await N(r.value,k,d.value):await K(k,d.value)}catch(a){console.error(a)}if(u.value=l?e:[...u.value,...e],h.value=l&&!e.length,b.value=e.length===k,c.value=!1,h.value){const a=await N("not found",10,1);x.value=a[Math.floor(Math.random()*a.length)]}},R=Z(async()=>{d.value=1,await g(!0),window.scrollTo({top:0,behavior:"smooth"})},500);T(r,R);const H=async()=>{c.value||!b.value||(d.value++,await g(!1))};function C(){window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-200&&H()}return _(()=>{g(!0),window.addEventListener("scroll",C)}),y(()=>window.removeEventListener("scroll",C)),(l,e)=>{const a=I("router-link");return o(),s(V,null,[t(q,{absolute:"",value:!m.value,"z-index":"9999"},{default:i(()=>[t(O,{indeterminate:"",size:"64",width:"6"})]),_:1},8,["value"]),j(t(J,{class:"main-container",fluid:""},{default:i(()=>{var G;return[t(Q,{class:"align-center ma-0 pa-0",style:{"min-height":"80px","max-height":"100px"}},{default:i(()=>[t(A,{cols:"auto"},{default:i(()=>[t(a,{to:"/",class:"gradient-title"},{default:i(()=>e[1]||(e[1]=[f("h2",null,"Gif",-1)])),_:1,__:[1]})]),_:1}),t(A,{class:"flex-grow-1"},{default:i(()=>[t($,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=p=>r.value=p),label:"Поиск гифок","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),h.value?(o(),s("div",ae,[e[2]||(e[2]=f("div",{class:"not-found-text"},"Not Found",-1)),f("div",te,[f("img",{src:(G=x.value)==null?void 0:G.images.fixed_width.url,alt:"Not Found Gif"},null,8,ne)])])):F("",!0),t(Y,{name:"fade-gifs",mode:"out-in"},{default:i(()=>[(o(),s("div",{class:"gif-masonry pt-5",key:r.value+d.value},[(o(!0),s(V,null,M(B.value,(p,P)=>(o(),s("div",{key:P,class:"masonry-column"},[(o(!0),s(V,null,M(p,(z,ie)=>(o(),s("div",{key:z.id,class:"gif-item appear"},[t(ee,{gif:z},null,8,["gif"])]))),128))]))),128))]))]),_:1}),c.value&&u.value.length?(o(),s("div",se,"Загрузка...")):F("",!0)]}),_:1},512),[[D,m.value]])],64)}}}),ce=X(oe,[["__scopeId","data-v-cb70b4d0"]]);export{ce as default};
