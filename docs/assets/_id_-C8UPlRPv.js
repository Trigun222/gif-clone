import{g as ae,p as me,A as ge,af as Se,Q as w,C as y,ag as K,ah as ye,ai as Q,G as oe,f as _e,h as d,n as ke,i as R,a9 as xe,aj as be,j as we,N as U,ak as ze,a as _,d as Ce,r as J,V as Ie,ab as Ve,b as X,a3 as S,u as Re,a2 as Ge,o as x,c as G,e as Ee,S as Ae,ac as H,ad as Y,L as Te,a7 as Fe}from"./index-CimdlJTL.js";import{V as N,h as Pe,j as Oe,k as We,f as Z,g as ee,_ as Me}from"./index-DAy0n4-Q.js";import{b as te,S as Be}from"./index-DMjUnsyf.js";import{d as He,e as Ne,f as Le,h as $e,c as De,V as le}from"./VBtn-B6raKY8D.js";function je(s){let{selectedElement:o,containerElement:a,isRtl:l,isHorizontal:c}=s;const h=z(c,a),i=ne(c,l,a),m=z(c,o),v=ie(c,o),p=m*.4;return i>v?v-p:i+h<v+m?v-h+m+p:i}function qe(s){let{selectedElement:o,containerElement:a,isHorizontal:l}=s;const c=z(l,a),h=ie(l,o),i=z(l,o);return h-c/2+i/2}function se(s,o){const a=s?"scrollWidth":"scrollHeight";return(o==null?void 0:o[a])||0}function Ke(s,o){const a=s?"clientWidth":"clientHeight";return(o==null?void 0:o[a])||0}function ne(s,o,a){if(!a)return 0;const{scrollLeft:l,offsetWidth:c,scrollWidth:h}=a;return s?o?h-c+l:l:a.scrollTop}function z(s,o){const a=s?"offsetWidth":"offsetHeight";return(o==null?void 0:o[a])||0}function ie(s,o){const a=s?"offsetLeft":"offsetTop";return(o==null?void 0:o[a])||0}const re=Symbol.for("vuetify:v-slide-group"),Qe=me({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:re},nextIcon:{type:U,default:"$next"},prevIcon:{type:U,default:"$prev"},showArrows:{type:[Boolean,String],validator:s=>typeof s=="boolean"||["always","desktop","mobile"].includes(s)},...we(),...be({mobile:null}),...xe(),...Ne({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Ue=ae()({name:"VSlideGroup",props:Qe(),emits:{"update:modelValue":s=>!0},setup(s,o){let{slots:a}=o;const{isRtl:l}=ge(),{displayClasses:c,mobile:h}=Se(s),i=He(s,s.symbol),m=w(!1),v=w(0),p=w(0),g=w(0),u=y(()=>s.direction==="horizontal"),{resizeRef:r,contentRect:k}=K(),{resizeRef:f,contentRect:C}=K(),L=ye(),$=y(()=>({container:r.el,duration:200,easing:"easeOutQuart"})),ue=y(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[0]):-1),ce=y(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[i.selected.value.length-1]):-1);if(Q){let t=-1;oe(()=>[i.selected.value,k.value,C.value,u.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(k.value&&C.value){const e=u.value?"width":"height";p.value=k.value[e],g.value=C.value[e],m.value=p.value+1<g.value}if(ue.value>=0&&f.el){const e=f.el.children[ce.value];D(e,s.centerActive)}})})}const I=w(!1);function D(t,e){let n=0;e?n=qe({containerElement:r.el,isHorizontal:u.value,selectedElement:t}):n=je({containerElement:r.el,isHorizontal:u.value,isRtl:l.value,selectedElement:t}),j(n)}function j(t){if(!Q||!r.el)return;const e=z(u.value,r.el),n=ne(u.value,l.value,r.el);if(!(se(u.value,r.el)<=e||Math.abs(t-n)<16)){if(u.value&&l.value&&r.el){const{scrollWidth:M,offsetWidth:B}=r.el;t=M-B-t}u.value?L.horizontal(t,$.value):L(t,$.value)}}function fe(t){const{scrollTop:e,scrollLeft:n}=t.target;v.value=u.value?n:e}function de(t){if(I.value=!0,!(!m.value||!f.el)){for(const e of t.composedPath())for(const n of f.el.children)if(n===e){D(n);return}}}function ve(t){I.value=!1}let E=!1;function pe(t){var e;!E&&!I.value&&!(t.relatedTarget&&((e=f.el)!=null&&e.contains(t.relatedTarget)))&&b(),E=!1}function q(){E=!0}function he(t){if(!f.el)return;function e(n){t.preventDefault(),b(n)}u.value?t.key==="ArrowRight"?e(l.value?"prev":"next"):t.key==="ArrowLeft"&&e(l.value?"next":"prev"):t.key==="ArrowDown"?e("next"):t.key==="ArrowUp"&&e("prev"),t.key==="Home"?e("first"):t.key==="End"&&e("last")}function V(t,e){if(!t)return;let n=t;do n=n==null?void 0:n[e==="next"?"nextElementSibling":"previousElementSibling"];while(n!=null&&n.hasAttribute("disabled"));return n}function b(t){if(!f.el)return;let e;if(!t)e=ze(f.el)[0];else if(t==="next"){if(e=V(f.el.querySelector(":focus"),t),!e)return b("first")}else if(t==="prev"){if(e=V(f.el.querySelector(":focus"),t),!e)return b("last")}else t==="first"?(e=f.el.firstElementChild,e!=null&&e.hasAttribute("disabled")&&(e=V(e,"next"))):t==="last"&&(e=f.el.lastElementChild,e!=null&&e.hasAttribute("disabled")&&(e=V(e,"prev")));e&&e.focus({preventScroll:!0})}function A(t){const e=u.value&&l.value?-1:1,n=(t==="prev"?-e:e)*p.value;let W=v.value+n;if(u.value&&l.value&&r.el){const{scrollWidth:M,offsetWidth:B}=r.el;W+=M-B}j(W)}const T=y(()=>({next:i.next,prev:i.prev,select:i.select,isSelected:i.isSelected})),F=y(()=>{switch(s.showArrows){case"always":return!0;case"desktop":return!h.value;case!0:return m.value||Math.abs(v.value)>0;case"mobile":return h.value||m.value||Math.abs(v.value)>0;default:return!h.value&&(m.value||Math.abs(v.value)>0)}}),P=y(()=>Math.abs(v.value)>1),O=y(()=>{if(!r.value)return!1;const t=se(u.value,r.el),e=Ke(u.value,r.el);return t-e-Math.abs(v.value)>1});return _e(()=>d(s.tag,{class:R(["v-slide-group",{"v-slide-group--vertical":!u.value,"v-slide-group--has-affixes":F.value,"v-slide-group--is-overflowing":m.value},c.value,s.class]),style:ke(s.style),tabindex:I.value||i.selected.value.length?-1:0,onFocus:pe},{default:()=>{var t,e,n;return[F.value&&_("div",{key:"prev",class:R(["v-slide-group__prev",{"v-slide-group__prev--disabled":!P.value}]),onMousedown:q,onClick:()=>P.value&&A("prev")},[((t=a.prev)==null?void 0:t.call(a,T.value))??d(te,null,{default:()=>[d(N,{icon:l.value?s.nextIcon:s.prevIcon},null)]})]),_("div",{key:"container",ref:r,class:R(["v-slide-group__container",s.contentClass]),onScroll:fe},[_("div",{ref:f,class:"v-slide-group__content",onFocusin:de,onFocusout:ve,onKeydown:he},[(e=a.default)==null?void 0:e.call(a,T.value)])]),F.value&&_("div",{key:"next",class:R(["v-slide-group__next",{"v-slide-group__next--disabled":!O.value}]),onMousedown:q,onClick:()=>O.value&&A("next")},[((n=a.next)==null?void 0:n.call(a,T.value))??d(te,null,{default:()=>[d(N,{icon:l.value?s.prevIcon:s.nextIcon},null)]})])]}})),{selected:i.selected,scrollTo:A,scrollOffset:v,focus:b,hasPrev:P,hasNext:O}}}),Je=ae()({name:"VSlideGroupItem",props:Le(),emits:{"group:selected":s=>!0},setup(s,o){let{slots:a}=o;const l=$e(s,re);return()=>{var c;return(c=a.default)==null?void 0:c.call(a,{isSelected:l.isSelected.value,select:l.select,toggle:l.toggle,selectedClass:l.selectedClass.value})}}}),Xe={class:"d-flex align-center mt-4 mb-2"},Ye={class:"ml-3 mb-0"},Ze={key:0,class:"gif-wrapper"},et={key:1},tt={key:2},lt=["onClick"],st=Ce({__name:"[id]",setup(s){const o=Ve(),a=Re(),l=J(null),c=J([]);async function h(){const p=o.params.id;l.value=await Oe(p)}async function i(){c.value=await We(20)}function m(){var p;(p=l.value)!=null&&p.id&&localStorage.setItem("lastGifId",l.value.id)}function v(p){a.push(`/gif/${p}`)}return Ie(async()=>{await h(),await i()}),oe(()=>o.params.id,async()=>{await h(),await i()}),(p,g)=>{const u=Ge("router-link");return x(),X(Pe,null,{default:S(()=>[d(Z,{justify:"center"},{default:S(()=>[d(ee,{cols:"12",md:"8"},{default:S(()=>{var r,k,f;return[_("div",Xe,[d(De,{icon:"",onClick:g[0]||(g[0]=C=>Ae(a).push("/"))},{default:S(()=>[d(N,null,{default:S(()=>g[1]||(g[1]=[H("mdi-arrow-left")])),_:1,__:[1]})]),_:1}),_("h2",Ye,Y((r=l.value)==null?void 0:r.title),1)]),l.value?(x(),G("div",Ze,[d(le,{src:l.value.images.original.url,alt:l.value.title,"max-height":"400",class:"mb-4"},null,8,["src","alt"]),d(Be,{class:"share-btn",gif:{id:l.value.id,title:l.value.title}},null,8,["gif"])])):(x(),G("p",et,"Загрузка...")),(f=(k=l.value)==null?void 0:k.user)!=null&&f.username?(x(),G("p",tt,[g[2]||(g[2]=H(" Автор: ")),d(u,{to:`/author/${l.value.id}`,onClick:m},{default:S(()=>[H(Y(l.value.user.display_name||l.value.user.username),1)]),_:1},8,["to"])])):Ee("",!0)]}),_:1})]),_:1}),d(Z,{class:"mt-8"},{default:S(()=>[d(ee,{cols:"12"},{default:S(()=>[g[3]||(g[3]=_("h3",{class:"mb-4"},"Случайные гифки",-1)),d(Ue,{"show-arrows":"",class:"random-slider"},{default:S(()=>[(x(!0),G(Te,null,Fe(c.value,r=>(x(),X(Je,{key:r.id},{default:S(()=>[_("div",{onClick:k=>v(r.id),class:"mx-2",style:{width:"200px",cursor:"pointer"}},[d(le,{src:r.images.fixed_width.url,alt:r.title,width:"200",height:"150",class:"rounded uniform-gif"},null,8,["src","alt"])],8,lt)]),_:2},1024))),128))]),_:1})]),_:1,__:[3]})]),_:1})]),_:1})}}}),rt=Me(st,[["__scopeId","data-v-18f21539"]]);export{rt as default};
