import{N as ae,p as me,Q as he,E as ge,D as w,k as S,a4 as U,au as ye,I as Q,w as Se,T as _e,U as v,a6 as xe,a7 as V,a8 as ke,av as be,Z as we,a9 as j,aw as ze,a as _,d as Ce,r as J,F as Ie,b as Z,an as y,aq as Re,u as Ve,am as Ge,o as k,c as G,f as Ee,ag as Te,ar as H,as as X,W as Ae,ap as Fe}from"./index-BbRFHvou.js";import{H as Pe,J as Oe,n as N,K as We,N as Me,z as Be,O as He,P as Ne,x as Y,y as ee,V as De,_ as $e}from"./index-CWYVTr2-.js";import{b as te,S as Le}from"./index-CTpMsOze.js";import{V as le}from"./VImg-BGl3TFG9.js";function qe(s){let{selectedElement:o,containerElement:a,isRtl:l,isHorizontal:c}=s;const m=z(c,a),i=oe(c,l,a),h=z(c,o),p=ne(c,o),f=h*.4;return i>p?p-f:i+m<p+h?p-m+h+f:i}function Ke(s){let{selectedElement:o,containerElement:a,isHorizontal:l}=s;const c=z(l,a),m=ne(l,o),i=z(l,o);return m-c/2+i/2}function se(s,o){const a=s?"scrollWidth":"scrollHeight";return(o==null?void 0:o[a])||0}function Ue(s,o){const a=s?"clientWidth":"clientHeight";return(o==null?void 0:o[a])||0}function oe(s,o,a){if(!a)return 0;const{scrollLeft:l,offsetWidth:c,scrollWidth:m}=a;return s?o?m-c+l:l:a.scrollTop}function z(s,o){const a=s?"offsetWidth":"offsetHeight";return(o==null?void 0:o[a])||0}function ne(s,o){const a=s?"offsetLeft":"offsetTop";return(o==null?void 0:o[a])||0}const re=Symbol.for("vuetify:v-slide-group"),Qe=me({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:re},nextIcon:{type:j,default:"$next"},prevIcon:{type:j,default:"$prev"},showArrows:{type:[Boolean,String],validator:s=>typeof s=="boolean"||["always","desktop","mobile"].includes(s)},...we(),...be({mobile:null}),...ke(),...Oe({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),je=ae()({name:"VSlideGroup",props:Qe(),emits:{"update:modelValue":s=>!0},setup(s,o){let{slots:a}=o;const{isRtl:l}=he(),{displayClasses:c,mobile:m}=ge(s),i=Pe(s,s.symbol),h=w(!1),p=w(0),f=w(0),g=w(0),u=S(()=>s.direction==="horizontal"),{resizeRef:r,contentRect:x}=U(),{resizeRef:d,contentRect:C}=U(),D=ye(),$=S(()=>({container:r.el,duration:200,easing:"easeOutQuart"})),ie=S(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[0]):-1),ue=S(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[i.selected.value.length-1]):-1);if(Q){let t=-1;Se(()=>[i.selected.value,x.value,C.value,u.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(x.value&&C.value){const e=u.value?"width":"height";f.value=x.value[e],g.value=C.value[e],h.value=f.value+1<g.value}if(ie.value>=0&&d.el){const e=d.el.children[ue.value];L(e,s.centerActive)}})})}const I=w(!1);function L(t,e){let n=0;e?n=Ke({containerElement:r.el,isHorizontal:u.value,selectedElement:t}):n=qe({containerElement:r.el,isHorizontal:u.value,isRtl:l.value,selectedElement:t}),q(n)}function q(t){if(!Q||!r.el)return;const e=z(u.value,r.el),n=oe(u.value,l.value,r.el);if(!(se(u.value,r.el)<=e||Math.abs(t-n)<16)){if(u.value&&l.value&&r.el){const{scrollWidth:M,offsetWidth:B}=r.el;t=M-B-t}u.value?D.horizontal(t,$.value):D(t,$.value)}}function ce(t){const{scrollTop:e,scrollLeft:n}=t.target;p.value=u.value?n:e}function fe(t){if(I.value=!0,!(!h.value||!d.el)){for(const e of t.composedPath())for(const n of d.el.children)if(n===e){L(n);return}}}function de(t){I.value=!1}let E=!1;function ve(t){var e;!E&&!I.value&&!(t.relatedTarget&&((e=d.el)!=null&&e.contains(t.relatedTarget)))&&b(),E=!1}function K(){E=!0}function pe(t){if(!d.el)return;function e(n){t.preventDefault(),b(n)}u.value?t.key==="ArrowRight"?e(l.value?"prev":"next"):t.key==="ArrowLeft"&&e(l.value?"next":"prev"):t.key==="ArrowDown"?e("next"):t.key==="ArrowUp"&&e("prev"),t.key==="Home"?e("first"):t.key==="End"&&e("last")}function R(t,e){if(!t)return;let n=t;do n=n==null?void 0:n[e==="next"?"nextElementSibling":"previousElementSibling"];while(n!=null&&n.hasAttribute("disabled"));return n}function b(t){if(!d.el)return;let e;if(!t)e=ze(d.el)[0];else if(t==="next"){if(e=R(d.el.querySelector(":focus"),t),!e)return b("first")}else if(t==="prev"){if(e=R(d.el.querySelector(":focus"),t),!e)return b("last")}else t==="first"?(e=d.el.firstElementChild,e!=null&&e.hasAttribute("disabled")&&(e=R(e,"next"))):t==="last"&&(e=d.el.lastElementChild,e!=null&&e.hasAttribute("disabled")&&(e=R(e,"prev")));e&&e.focus({preventScroll:!0})}function T(t){const e=u.value&&l.value?-1:1,n=(t==="prev"?-e:e)*f.value;let W=p.value+n;if(u.value&&l.value&&r.el){const{scrollWidth:M,offsetWidth:B}=r.el;W+=M-B}q(W)}const A=S(()=>({next:i.next,prev:i.prev,select:i.select,isSelected:i.isSelected})),F=S(()=>{switch(s.showArrows){case"always":return!0;case"desktop":return!m.value;case!0:return h.value||Math.abs(p.value)>0;case"mobile":return m.value||h.value||Math.abs(p.value)>0;default:return!m.value&&(h.value||Math.abs(p.value)>0)}}),P=S(()=>Math.abs(p.value)>1),O=S(()=>{if(!r.value)return!1;const t=se(u.value,r.el),e=Ue(u.value,r.el);return t-e-Math.abs(p.value)>1});return _e(()=>v(s.tag,{class:V(["v-slide-group",{"v-slide-group--vertical":!u.value,"v-slide-group--has-affixes":F.value,"v-slide-group--is-overflowing":h.value},c.value,s.class]),style:xe(s.style),tabindex:I.value||i.selected.value.length?-1:0,onFocus:ve},{default:()=>{var t,e,n;return[F.value&&_("div",{key:"prev",class:V(["v-slide-group__prev",{"v-slide-group__prev--disabled":!P.value}]),onMousedown:K,onClick:()=>P.value&&T("prev")},[((t=a.prev)==null?void 0:t.call(a,A.value))??v(te,null,{default:()=>[v(N,{icon:l.value?s.nextIcon:s.prevIcon},null)]})]),_("div",{key:"container",ref:r,class:V(["v-slide-group__container",s.contentClass]),onScroll:ce},[_("div",{ref:d,class:"v-slide-group__content",onFocusin:fe,onFocusout:de,onKeydown:pe},[(e=a.default)==null?void 0:e.call(a,A.value)])]),F.value&&_("div",{key:"next",class:V(["v-slide-group__next",{"v-slide-group__next--disabled":!O.value}]),onMousedown:K,onClick:()=>O.value&&T("next")},[((n=a.next)==null?void 0:n.call(a,A.value))??v(te,null,{default:()=>[v(N,{icon:l.value?s.prevIcon:s.nextIcon},null)]})])]}})),{selected:i.selected,scrollTo:T,scrollOffset:p,focus:b,hasPrev:P,hasNext:O}}}),Je=ae()({name:"VSlideGroupItem",props:We(),emits:{"group:selected":s=>!0},setup(s,o){let{slots:a}=o;const l=Me(s,re);return()=>{var c;return(c=a.default)==null?void 0:c.call(a,{isSelected:l.isSelected.value,select:l.select,toggle:l.toggle,selectedClass:l.selectedClass.value})}}}),Ze={class:"d-flex align-center mt-4 mb-2"},Xe={class:"ml-3 mb-0"},Ye={key:0,class:"gif-wrapper"},et={key:1},tt={key:2},lt=["onClick"],st=Ce({__name:"[id]",setup(s){const o=Re(),a=Ve(),l=J(null),c=J([]);async function m(){const f=o.params.id;l.value=await He(f)}async function i(){const f=Array.from({length:20},()=>Ne());c.value=await Promise.all(f)}function h(){var f;(f=l.value)!=null&&f.id&&localStorage.setItem("lastGifId",l.value.id)}function p(f){a.push(`/gif/${f}`)}return Ie(async()=>{await m(),await i()}),(f,g)=>{const u=Ge("router-link");return k(),Z(Be,null,{default:y(()=>[v(Y,{justify:"center"},{default:y(()=>[v(ee,{cols:"12",md:"8"},{default:y(()=>{var r,x,d;return[_("div",Ze,[v(De,{icon:"",onClick:g[0]||(g[0]=C=>Te(a).push("/"))},{default:y(()=>[v(N,null,{default:y(()=>g[1]||(g[1]=[H("mdi-arrow-left")])),_:1,__:[1]})]),_:1}),_("h2",Xe,X((r=l.value)==null?void 0:r.title),1)]),l.value?(k(),G("div",Ye,[v(le,{src:l.value.images.original.url,alt:l.value.title,"max-height":"400",class:"mb-4"},null,8,["src","alt"]),v(Le,{gif:{id:l.value.id,title:l.value.title}},null,8,["gif"])])):(k(),G("p",et,"Загрузка...")),(d=(x=l.value)==null?void 0:x.user)!=null&&d.username?(k(),G("p",tt,[g[2]||(g[2]=H(" Автор: ")),v(u,{to:`/author/${l.value.user.username}`,onClick:h},{default:y(()=>[H(X(l.value.user.display_name||l.value.user.username),1)]),_:1},8,["to"])])):Ee("",!0)]}),_:1})]),_:1}),v(Y,{class:"mt-8"},{default:y(()=>[v(ee,{cols:"12"},{default:y(()=>[g[3]||(g[3]=_("h3",{class:"mb-4"},"Случайные гифки",-1)),v(je,{"show-arrows":"",class:"random-slider"},{default:y(()=>[(k(!0),G(Ae,null,Fe(c.value,r=>(k(),Z(Je,{key:r.id},{default:y(()=>[_("div",{onClick:x=>p(r.id),class:"mx-2",style:{width:"200px",cursor:"pointer"}},[v(le,{src:r.images.fixed_width.url,alt:r.title,height:"150",class:"rounded"},null,8,["src","alt"])],8,lt)]),_:2},1024))),128))]),_:1})]),_:1,__:[3]})]),_:1})]),_:1})}}}),it=$e(st,[["__scopeId","data-v-89c5779d"]]);export{it as default};
