import{g as ae,p as he,j as ge,l as ye,s as w,q as S,n as K,al as Se,am as U,S as oe,w as _e,x as d,y as xe,z as V,B as ke,an as be,D as we,I as Q,ao as ze,a as _,d as Ce,r as X,a2 as Ie,ai as Re,b as J,ab as y,u as Ve,aa as Ge,o as k,c as G,e as Ee,$ as Te,ag as H,aj as Y,X as Ae,af as Fe}from"./index-Ca2TslgD.js";import{t as Pe,v as Oe,e as $,w as We,x as Be,l as Me,r as He,y as $e,j as Z,k as ee,V as De,_ as Ne}from"./index-Bo0g_uN7.js";import{b as te,S as Le}from"./index-BRQAiDYR.js";import{V as le}from"./VImg-B-7pIS0p.js";function je(s){let{selectedElement:o,containerElement:a,isRtl:l,isHorizontal:c}=s;const m=z(c,a),i=ne(c,l,a),h=z(c,o),v=ie(c,o),p=h*.4;return i>v?v-p:i+m<v+h?v-m+h+p:i}function qe(s){let{selectedElement:o,containerElement:a,isHorizontal:l}=s;const c=z(l,a),m=ie(l,o),i=z(l,o);return m-c/2+i/2}function se(s,o){const a=s?"scrollWidth":"scrollHeight";return(o==null?void 0:o[a])||0}function Ke(s,o){const a=s?"clientWidth":"clientHeight";return(o==null?void 0:o[a])||0}function ne(s,o,a){if(!a)return 0;const{scrollLeft:l,offsetWidth:c,scrollWidth:m}=a;return s?o?m-c+l:l:a.scrollTop}function z(s,o){const a=s?"offsetWidth":"offsetHeight";return(o==null?void 0:o[a])||0}function ie(s,o){const a=s?"offsetLeft":"offsetTop";return(o==null?void 0:o[a])||0}const re=Symbol.for("vuetify:v-slide-group"),Ue=he({centerActive:Boolean,contentClass:null,direction:{type:String,default:"horizontal"},symbol:{type:null,default:re},nextIcon:{type:Q,default:"$next"},prevIcon:{type:Q,default:"$prev"},showArrows:{type:[Boolean,String],validator:s=>typeof s=="boolean"||["always","desktop","mobile"].includes(s)},...we(),...be({mobile:null}),...ke(),...Oe({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),Qe=ae()({name:"VSlideGroup",props:Ue(),emits:{"update:modelValue":s=>!0},setup(s,o){let{slots:a}=o;const{isRtl:l}=ge(),{displayClasses:c,mobile:m}=ye(s),i=Pe(s,s.symbol),h=w(!1),v=w(0),p=w(0),g=w(0),u=S(()=>s.direction==="horizontal"),{resizeRef:r,contentRect:x}=K(),{resizeRef:f,contentRect:C}=K(),D=Se(),N=S(()=>({container:r.el,duration:200,easing:"easeOutQuart"})),ue=S(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[0]):-1),ce=S(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[i.selected.value.length-1]):-1);if(U){let t=-1;oe(()=>[i.selected.value,x.value,C.value,u.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(x.value&&C.value){const e=u.value?"width":"height";p.value=x.value[e],g.value=C.value[e],h.value=p.value+1<g.value}if(ue.value>=0&&f.el){const e=f.el.children[ce.value];L(e,s.centerActive)}})})}const I=w(!1);function L(t,e){let n=0;e?n=qe({containerElement:r.el,isHorizontal:u.value,selectedElement:t}):n=je({containerElement:r.el,isHorizontal:u.value,isRtl:l.value,selectedElement:t}),j(n)}function j(t){if(!U||!r.el)return;const e=z(u.value,r.el),n=ne(u.value,l.value,r.el);if(!(se(u.value,r.el)<=e||Math.abs(t-n)<16)){if(u.value&&l.value&&r.el){const{scrollWidth:B,offsetWidth:M}=r.el;t=B-M-t}u.value?D.horizontal(t,N.value):D(t,N.value)}}function fe(t){const{scrollTop:e,scrollLeft:n}=t.target;v.value=u.value?n:e}function de(t){if(I.value=!0,!(!h.value||!f.el)){for(const e of t.composedPath())for(const n of f.el.children)if(n===e){L(n);return}}}function ve(t){I.value=!1}let E=!1;function pe(t){var e;!E&&!I.value&&!(t.relatedTarget&&((e=f.el)!=null&&e.contains(t.relatedTarget)))&&b(),E=!1}function q(){E=!0}function me(t){if(!f.el)return;function e(n){t.preventDefault(),b(n)}u.value?t.key==="ArrowRight"?e(l.value?"prev":"next"):t.key==="ArrowLeft"&&e(l.value?"next":"prev"):t.key==="ArrowDown"?e("next"):t.key==="ArrowUp"&&e("prev"),t.key==="Home"?e("first"):t.key==="End"&&e("last")}function R(t,e){if(!t)return;let n=t;do n=n==null?void 0:n[e==="next"?"nextElementSibling":"previousElementSibling"];while(n!=null&&n.hasAttribute("disabled"));return n}function b(t){if(!f.el)return;let e;if(!t)e=ze(f.el)[0];else if(t==="next"){if(e=R(f.el.querySelector(":focus"),t),!e)return b("first")}else if(t==="prev"){if(e=R(f.el.querySelector(":focus"),t),!e)return b("last")}else t==="first"?(e=f.el.firstElementChild,e!=null&&e.hasAttribute("disabled")&&(e=R(e,"next"))):t==="last"&&(e=f.el.lastElementChild,e!=null&&e.hasAttribute("disabled")&&(e=R(e,"prev")));e&&e.focus({preventScroll:!0})}function T(t){const e=u.value&&l.value?-1:1,n=(t==="prev"?-e:e)*p.value;let W=v.value+n;if(u.value&&l.value&&r.el){const{scrollWidth:B,offsetWidth:M}=r.el;W+=B-M}j(W)}const A=S(()=>({next:i.next,prev:i.prev,select:i.select,isSelected:i.isSelected})),F=S(()=>{switch(s.showArrows){case"always":return!0;case"desktop":return!m.value;case!0:return h.value||Math.abs(v.value)>0;case"mobile":return m.value||h.value||Math.abs(v.value)>0;default:return!m.value&&(h.value||Math.abs(v.value)>0)}}),P=S(()=>Math.abs(v.value)>1),O=S(()=>{if(!r.value)return!1;const t=se(u.value,r.el),e=Ke(u.value,r.el);return t-e-Math.abs(v.value)>1});return _e(()=>d(s.tag,{class:V(["v-slide-group",{"v-slide-group--vertical":!u.value,"v-slide-group--has-affixes":F.value,"v-slide-group--is-overflowing":h.value},c.value,s.class]),style:xe(s.style),tabindex:I.value||i.selected.value.length?-1:0,onFocus:pe},{default:()=>{var t,e,n;return[F.value&&_("div",{key:"prev",class:V(["v-slide-group__prev",{"v-slide-group__prev--disabled":!P.value}]),onMousedown:q,onClick:()=>P.value&&T("prev")},[((t=a.prev)==null?void 0:t.call(a,A.value))??d(te,null,{default:()=>[d($,{icon:l.value?s.nextIcon:s.prevIcon},null)]})]),_("div",{key:"container",ref:r,class:V(["v-slide-group__container",s.contentClass]),onScroll:fe},[_("div",{ref:f,class:"v-slide-group__content",onFocusin:de,onFocusout:ve,onKeydown:me},[(e=a.default)==null?void 0:e.call(a,A.value)])]),F.value&&_("div",{key:"next",class:V(["v-slide-group__next",{"v-slide-group__next--disabled":!O.value}]),onMousedown:q,onClick:()=>O.value&&T("next")},[((n=a.next)==null?void 0:n.call(a,A.value))??d(te,null,{default:()=>[d($,{icon:l.value?s.prevIcon:s.nextIcon},null)]})])]}})),{selected:i.selected,scrollTo:T,scrollOffset:v,focus:b,hasPrev:P,hasNext:O}}}),Xe=ae()({name:"VSlideGroupItem",props:We(),emits:{"group:selected":s=>!0},setup(s,o){let{slots:a}=o;const l=Be(s,re);return()=>{var c;return(c=a.default)==null?void 0:c.call(a,{isSelected:l.isSelected.value,select:l.select,toggle:l.toggle,selectedClass:l.selectedClass.value})}}}),Je={class:"d-flex align-center mt-4 mb-2"},Ye={class:"ml-3 mb-0"},Ze={key:0,class:"gif-wrapper"},et={key:1},tt={key:2},lt=["onClick"],st=Ce({__name:"[id]",setup(s){const o=Re(),a=Ve(),l=X(null),c=X([]);async function m(){const p=o.params.id;l.value=await He(p)}async function i(){c.value=await $e(20)}function h(){var p;(p=l.value)!=null&&p.id&&localStorage.setItem("lastGifId",l.value.id)}function v(p){a.push(`/gif/${p}`)}return Ie(async()=>{await m(),await i()}),oe(()=>o.params.id,async()=>{await m(),await i()}),(p,g)=>{const u=Ge("router-link");return k(),J(Me,null,{default:y(()=>[d(Z,{justify:"center"},{default:y(()=>[d(ee,{cols:"12",md:"8"},{default:y(()=>{var r,x,f;return[_("div",Je,[d(De,{icon:"",onClick:g[0]||(g[0]=C=>Te(a).push("/"))},{default:y(()=>[d($,null,{default:y(()=>g[1]||(g[1]=[H("mdi-arrow-left")])),_:1,__:[1]})]),_:1}),_("h2",Ye,Y((r=l.value)==null?void 0:r.title),1)]),l.value?(k(),G("div",Ze,[d(le,{src:l.value.images.original.url,alt:l.value.title,"max-height":"400",class:"mb-4"},null,8,["src","alt"]),d(Le,{gif:{id:l.value.id,title:l.value.title}},null,8,["gif"])])):(k(),G("p",et,"Загрузка...")),(f=(x=l.value)==null?void 0:x.user)!=null&&f.username?(k(),G("p",tt,[g[2]||(g[2]=H(" Автор: ")),d(u,{to:`/author/${l.value.id}`,onClick:h},{default:y(()=>[H(Y(l.value.user.display_name||l.value.user.username),1)]),_:1},8,["to"])])):Ee("",!0)]}),_:1})]),_:1}),d(Z,{class:"mt-8"},{default:y(()=>[d(ee,{cols:"12"},{default:y(()=>[g[3]||(g[3]=_("h3",{class:"mb-4"},"Случайные гифки",-1)),d(Qe,{"show-arrows":"",class:"random-slider"},{default:y(()=>[(k(!0),G(Ae,null,Fe(c.value,r=>(k(),J(Xe,{key:r.id},{default:y(()=>[_("div",{onClick:x=>v(r.id),class:"mx-2",style:{width:"200px",cursor:"pointer"}},[d(le,{src:r.images.fixed_width.url,alt:r.title,width:"200",height:"150",class:"rounded uniform-gif"},null,8,["src","alt"])],8,lt)]),_:2},1024))),128))]),_:1})]),_:1,__:[3]})]),_:1})]),_:1})}}}),rt=Ne(st,[["__scopeId","data-v-0c0f97b8"]]);export{rt as default};
