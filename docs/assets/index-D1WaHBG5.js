import{d as U,r as a,o as p,a as x,c as F,w as W,b as j,e as l,f as o,g as n,h as D,i,V as I,j as O,v as Y,k as M,l as u,F as V,m as N,n as q}from"./index-CLQWBV1Q.js";import{V as J,a as S,b as K,s as B,g as Q,_ as X}from"./index-C89p0vCC.js";import{V as Z,G as $,d as ee}from"./VTextField-CXFAU-mR.js";const ae={key:0,class:"not-found"},te={class:"gif-item not-found-gif"},ne=["src"],oe={class:"gif-masonry pt-5"},se={key:1,class:"loading"},y=30,le=U({__name:"index",setup(ie){const m=a(!1);function w(){m.value=!0}p(()=>{document.readyState==="complete"?w():window.addEventListener("load",w)}),x(()=>window.removeEventListener("load",w));const r=a(""),h=a([]),k=a(null),d=a(1),c=a(!1),v=a(!1),b=a(!0),f=a(window.innerWidth);function C(){f.value=window.innerWidth}p(()=>window.addEventListener("resize",C)),x(()=>window.removeEventListener("resize",C));const E=F(()=>f.value<=600?1:f.value<=900?2:f.value<=1200?3:4),R=F(()=>{const s=Array.from({length:E.value},()=>[]);return h.value.forEach((e,t)=>{s[t%E.value].push(e)}),s}),_=async(s=!1)=>{c.value=!0;let e=[];try{e=r.value?await B(r.value,y,d.value):await Q(y,d.value)}catch(t){console.error(t)}if(h.value=s?e:[...h.value,...e],v.value=s&&!e.length,b.value=e.length===y,c.value=!1,v.value){const t=await B("not found",10,1);k.value=t[Math.floor(Math.random()*t.length)]}},T=ee(async()=>{d.value=1,await _(!0),window.scrollTo({top:0,behavior:"smooth"})},500);W(r,T);const A=async()=>{c.value||!b.value||(d.value++,await _(!1))};function L(){window.innerHeight+window.scrollY>=document.documentElement.scrollHeight-200&&A()}return p(()=>{_(!0),window.addEventListener("scroll",L)}),x(()=>window.removeEventListener("scroll",L)),(s,e)=>{const t=j("router-link");return o(),l(V,null,[n(O,{absolute:"",value:!m.value,"z-index":"9999"},{default:i(()=>[n(I,{indeterminate:"",size:"64",width:"6"})]),_:1},8,["value"]),D(n(K,{class:"main-container",fluid:""},{default:i(()=>{var G;return[n(J,{class:"align-center ma-0 pa-0",style:{"min-height":"80px","max-height":"100px"}},{default:i(()=>[n(S,{cols:"auto"},{default:i(()=>[n(t,{to:"/",class:"gradient-title"},{default:i(()=>e[1]||(e[1]=[u("h2",null,"Gif",-1)])),_:1,__:[1]})]),_:1}),n(S,{class:"flex-grow-1"},{default:i(()=>[n(Z,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=g=>r.value=g),label:"Поиск гифок","hide-details":"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),v.value?(o(),l("div",ae,[e[2]||(e[2]=u("div",{class:"not-found-text"},"Not Found",-1)),u("div",te,[u("img",{src:(G=k.value)==null?void 0:G.images.fixed_width.url,alt:"Not Found Gif"},null,8,ne)])])):M("",!0),u("div",oe,[(o(!0),l(V,null,N(R.value,(g,H)=>(o(),l("div",{key:H,class:"masonry-column"},[(o(!0),l(V,null,N(g,(z,P)=>(o(),q($,{key:z.id,gif:z,index:P},null,8,["gif","index"]))),128))]))),128))]),c.value&&!v.value?(o(),l("div",se,"Загрузка...")):M("",!0)]}),_:1},512),[[Y,m.value]])],64)}}}),ce=X(le,[["__scopeId","data-v-5cfa221d"]]);export{ce as default};
